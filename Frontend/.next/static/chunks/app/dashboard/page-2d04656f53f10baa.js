(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,a,t)=>{"use strict";t.d(a,{$:()=>c});var s=t(5155);t(2115);var r=t(9708),n=t(2085),i=t(9434);let o=(0,n.F)("inline-flex cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:a,variant:t,size:n,asChild:c=!1,...d}=e,l=c?r.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:n,className:a})),...d})}},1356:(e,a,t)=>{Promise.resolve().then(t.bind(t,4879))},4879:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(5155),r=t(285),n=t(2108);t(2115);var i=t(6695),o=t(6766);function c(){var e,a,t;let{data:c,status:d}=(0,n.useSession)();if(console.log(c),"loading"===d)return(0,s.jsx)("p",{children:"Loading..."});let l=c.user.name.toString().split(" ");return(0,s.jsxs)("div",{className:"w-screen h-screen grid place-content-center gap-5",children:[(0,s.jsx)("h1",{className:"text-4xl",children:"This is a protected route"}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"mx-auto",children:"Welcome back"})}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col justify-center gap-2 text-center",children:[(0,s.jsx)(o.default,{src:(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.image)?c.user.image:"https://ui-avatars.com/api/?name=".concat(l[0].toString(),"+").concat(l[1].toString(),"?size=&background=random&rounded=true"),alt:l[0]+" "+l[1],width:50,height:50,className:"mx-auto rounded-full"}),(0,s.jsx)("p",{children:null==c?void 0:null===(a=c.user)||void 0===a?void 0:a.name}),(0,s.jsx)("p",{children:null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.email})]})})]}),(0,s.jsx)(r.$,{className:"mx-auto",onClick:()=>(0,n.signOut)(),children:"Log Out"})]})}},6695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>i});var s=t(5155);t(2115);var r=t(9434);function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("flex flex-col gap-1.5 px-6",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...t})}},9434:(e,a,t)=>{"use strict";t.d(a,{Ru:()=>p,WS:()=>x,cn:()=>u,ni:()=>h,oy:()=>v});var s=t(2596),r=t(9688),n=t(5594),i=t(5943),o=t(8100),c=t(2108),d=t(9159),l=t(4561);function u(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}async function m(e){let a=await fetch("".concat("http://localhost:5253","/api/authentication/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("".concat(a.status," ").concat(a.statusText));let t=await a.json(),s=(0,d.s)(t.token);return console.log("---USUARIO CREADO---"),{id:s.nameid,name:s.unique_name,email:s.email,token:t.token}}async function g(e,a){let t=await fetch("".concat("http://localhost:5253","/api/authentication/login"),{method:"POST",body:JSON.stringify({username:e,password:a}),headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Error: ".concat(t.statusText));let s=await t.json(),r=(0,d.s)(s.token);return{id:r.nameid,name:r.unique_name,email:r.email,token:s.token}}(0,i.A)({name:"Credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},authorize:async e=>await g(e.username,e.password)}),(0,o.A)({clientId:l.env.GOOGLE_CLIENT_ID,clientSecret:l.env.GOOGLE_CLIENT_SECRET});let h=n.z.object({username:n.z.string().min(2,{message:"Username must be at least 2 characters"}).max(50),password:n.z.string().min(8,{message:"Password must be at least 8 characters and less than 16."}).max(16)}),p=n.z.object({firstname:n.z.string().min(2,{message:"Firstname is required"}).max(50),lastname:n.z.string().min(2,{message:"Lastname is required"}).max(50),username:n.z.string().min(2,{message:"Username must be at least 2 characters"}).max(50),email:n.z.string().email("Por favor, ingrese un correo electr\xf3nico v\xe1lido."),password:n.z.string().min(8,{message:"Password must be at least 8 characters and less than 16."}).max(16)});async function v(e){try{return await (0,c.signIn)("credentials",{username:e.username,password:e.password,redirect:!1})}catch(e){console.error("Error en el proceso de login:",e)}}async function x(e){let a={name:e.firstname,lastName:e.lastname,username:e.username,email:e.email,password:e.password};return await m(a),await (0,c.signIn)("credentials",{username:e.username,password:e.password,redirect:!1,callbackUrl:"/dashboard"})}}},e=>{var a=a=>e(e.s=a);e.O(0,[108,308,766,441,684,358],()=>a(1356)),_N_E=e.O()}]);