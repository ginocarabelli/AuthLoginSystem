(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{285:(e,s,r)=>{"use strict";r.d(s,{$:()=>o});var n=r(5155);r(2115);var t=r(9708),a=r(2085),i=r(9434);let l=(0,a.F)("inline-flex cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:s,variant:r,size:a,asChild:o=!1,...d}=e,c=o?t.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:r,size:a,className:s})),...d})}},2733:(e,s,r)=>{Promise.resolve().then(r.bind(r,7060))},6695:(e,s,r)=>{"use strict";r.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>a,aR:()=>i});var n=r(5155);r(2115);var t=r(9434);function a(e){let{className:s,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...r})}function i(e){let{className:s,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("flex flex-col gap-1.5 px-6",s),...r})}function l(e){let{className:s,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",s),...r})}function o(e){let{className:s,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",s),...r})}function d(e){let{className:s,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",s),...r})}},7060:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>R});var n=r(5155),t=r(2115),a=r(285),i=r(9708),l=r(2177),o=r(9434),d=r(968);function c(e){let{className:s,...r}=e;return(0,n.jsx)(d.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...r})}let u=l.Op,m=t.createContext({}),x=e=>{let{...s}=e;return(0,n.jsx)(m.Provider,{value:{name:s.name},children:(0,n.jsx)(l.xI,{...s})})},h=()=>{let e=t.useContext(m),s=t.useContext(p),{getFieldState:r}=(0,l.xW)(),n=(0,l.lN)({name:e.name}),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},p=t.createContext({});function f(e){let{className:s,...r}=e,a=t.useId();return(0,n.jsx)(p.Provider,{value:{id:a},children:(0,n.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",s),...r})})}function g(e){let{className:s,...r}=e,{error:t,formItemId:a}=h();return(0,n.jsx)(c,{"data-slot":"form-label","data-error":!!t,className:(0,o.cn)("data-[error=true]:text-destructive-foreground",s),htmlFor:a,...r})}function v(e){let{...s}=e,{error:r,formItemId:t,formDescriptionId:a,formMessageId:l}=h();return(0,n.jsx)(i.DX,{"data-slot":"form-control",id:t,"aria-describedby":r?"".concat(a," ").concat(l):"".concat(a),"aria-invalid":!!r,...s})}function j(e){var s;let{className:r,...t}=e,{error:a,formMessageId:i}=h(),l=a?String(null!==(s=null==a?void 0:a.message)&&void 0!==s?s:""):t.children;return l?(0,n.jsx)("p",{"data-slot":"form-message",id:i,className:(0,o.cn)("text-destructive-foreground text-sm",r),...t,children:l}):null}function b(e){let{className:s,type:r,...t}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,o.cn)("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t})}var w=r(221),y=r(6695),N=r(5695),k=r(2108);function I(e){let{setIsLoading:s}=e,r=(0,N.useRouter)(),[i,d]=(0,t.useState)(""),c=(0,l.mN)({resolver:(0,w.u)(o.ni),defaultValues:{username:"",password:""}}),m=async e=>{let s=await (0,o.oy)(e);(null==s?void 0:s.status)===200?r.push("/dashboard"):(null==s?void 0:s.status)===401?d("Invalid Credentials"):d(null==s?void 0:s.error)},h=async e=>{s(!0),await (0,k.signIn)(e,{redirect:!1,callbackUrl:"/dashboard"})};return(0,n.jsx)("div",{className:"max-w-96",children:(0,n.jsxs)(y.Zp,{children:[(0,n.jsxs)(y.aR,{children:[(0,n.jsx)(y.ZB,{children:"Log In"}),(0,n.jsx)(y.BT,{children:"Complete the formulary with your user credentials"})]}),(0,n.jsxs)(y.Wu,{children:[(0,n.jsx)(u,{...c,children:(0,n.jsxs)("form",{onSubmit:c.handleSubmit(m),className:"space-y-5 mb-3",children:[(0,n.jsx)(x,{control:c.control,name:"username",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Username"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)(x,{control:c.control,name:"password",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Password"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s,type:"password"})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)("p",{className:"text-red-500",children:i}),(0,n.jsx)(a.$,{type:"submit",className:"cursor-pointer w-full",children:"Log In"})]})}),(0,n.jsx)("div",{className:"w-full h-0.5 bg-neutral-200 rounded-xl my-3"}),(0,n.jsx)(a.$,{type:"button",className:"w-full py-5",onClick:()=>h("google"),children:"Log In with google"})]})]})})}function C(e){let{setIsLoading:s}=e,r=(0,N.useRouter)(),[i,d]=(0,t.useState)(""),c=(0,l.mN)({resolver:(0,w.u)(o.Ru),defaultValues:{firstname:"",lastname:"",username:"",email:"",password:""}}),m=async e=>{s(!0);let n=await (0,o.WS)(e);(null==n?void 0:n.status)===200?r.push("/dashboard"):(null==n?void 0:n.error)&&d(null==n?void 0:n.error)};return(0,n.jsx)("div",{className:"max-w-96",children:(0,n.jsxs)(y.Zp,{children:[(0,n.jsxs)(y.aR,{children:[(0,n.jsx)(y.ZB,{children:"Register"}),(0,n.jsx)(y.BT,{children:"Complete the formulary for create an account"})]}),(0,n.jsx)(y.Wu,{children:(0,n.jsx)(u,{...c,children:(0,n.jsxs)("form",{onSubmit:c.handleSubmit(m),className:"space-y-5",children:[(0,n.jsx)(x,{control:c.control,name:"firstname",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Name"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)(x,{control:c.control,name:"lastname",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Last Name"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)(x,{control:c.control,name:"username",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Username"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)(x,{control:c.control,name:"email",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Email"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)(x,{control:c.control,name:"password",render:e=>{let{field:s}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:"Password"}),(0,n.jsx)(v,{children:(0,n.jsx)(b,{...s})}),(0,n.jsx)(j,{})]})}}),(0,n.jsx)("p",{className:"text-red-500",children:i}),(0,n.jsx)(a.$,{type:"submit",className:"cursor-pointer w-full",children:"Register"})]})})})]})})}function _(){return(0,n.jsxs)("div",{className:"spinner center",children:[(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"}),(0,n.jsx)("div",{className:"spinner-blade"})]})}r(8499);var z=r(8181);function S(e){let{className:s,...r}=e;return(0,n.jsx)(z.bL,{"data-slot":"tabs",className:(0,o.cn)("flex flex-col gap-2",s),...r})}function E(e){let{className:s,...r}=e;return(0,n.jsx)(z.B8,{"data-slot":"tabs-list",className:(0,o.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...r})}function L(e){let{className:s,...r}=e;return(0,n.jsx)(z.l9,{"data-slot":"tabs-trigger",className:(0,o.cn)("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function O(e){let{className:s,...r}=e;return(0,n.jsx)(z.UC,{"data-slot":"tabs-content",className:(0,o.cn)("flex-1 outline-none",s),...r})}function R(){let[e,s]=(0,t.useState)(!1);return e?(0,n.jsx)("div",{className:"max-w-96 grid place-content-center",children:(0,n.jsx)(_,{})}):(0,n.jsx)("div",{className:"w-screen h-screen grid place-content-center my-auto",children:(0,n.jsxs)(S,{defaultValue:"login",children:[(0,n.jsxs)(E,{className:"w-full bg-neutral-300",children:[(0,n.jsx)(L,{value:"login",className:"cursor-pointer",children:"Log In"}),(0,n.jsx)(L,{value:"register",className:"cursor-pointer",children:"Register"})]}),(0,n.jsx)(O,{value:"login",children:(0,n.jsx)(I,{setIsLoading:s})}),(0,n.jsx)(O,{value:"register",children:(0,n.jsx)(C,{setIsLoading:s})})]})})}},8499:()=>{},9434:(e,s,r)=>{"use strict";r.d(s,{Ru:()=>p,WS:()=>g,cn:()=>u,ni:()=>h,oy:()=>f});var n=r(2596),t=r(9688),a=r(5594),i=r(5943),l=r(8100),o=r(2108),d=r(9159),c=r(4561);function u(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,n.$)(s))}async function m(e){let s=await fetch("".concat("http://localhost:5253","/api/authentication/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("".concat(s.status," ").concat(s.statusText));let r=await s.json(),n=(0,d.s)(r.token);return console.log("---USUARIO CREADO---"),{id:n.nameid,name:n.unique_name,email:n.email,token:r.token}}async function x(e,s){let r=await fetch("".concat("http://localhost:5253","/api/authentication/login"),{method:"POST",body:JSON.stringify({username:e,password:s}),headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Error: ".concat(r.statusText));let n=await r.json(),t=(0,d.s)(n.token);return{id:t.nameid,name:t.unique_name,email:t.email,token:n.token}}(0,i.A)({name:"Credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},authorize:async e=>await x(e.username,e.password)}),(0,l.A)({clientId:c.env.GOOGLE_CLIENT_ID,clientSecret:c.env.GOOGLE_CLIENT_SECRET});let h=a.z.object({username:a.z.string().min(2,{message:"Username must be at least 2 characters"}).max(50),password:a.z.string().min(8,{message:"Password must be at least 8 characters and less than 16."}).max(16)}),p=a.z.object({firstname:a.z.string().min(2,{message:"Firstname is required"}).max(50),lastname:a.z.string().min(2,{message:"Lastname is required"}).max(50),username:a.z.string().min(2,{message:"Username must be at least 2 characters"}).max(50),email:a.z.string().email("Por favor, ingrese un correo electr\xf3nico v\xe1lido."),password:a.z.string().min(8,{message:"Password must be at least 8 characters and less than 16."}).max(16)});async function f(e){try{return await (0,o.signIn)("credentials",{username:e.username,password:e.password,redirect:!1})}catch(e){console.error("Error en el proceso de login:",e)}}async function g(e){let s={name:e.firstname,lastName:e.lastname,username:e.username,email:e.email,password:e.password};return await m(s),await (0,o.signIn)("credentials",{username:e.username,password:e.password,redirect:!1,callbackUrl:"/dashboard"})}}},e=>{var s=s=>e(e.s=s);e.O(0,[850,108,308,994,441,684,358],()=>s(2733)),_N_E=e.O()}]);